(this["webpackJsonpsnp-todo-react"]=this["webpackJsonpsnp-todo-react"]||[]).push([[0],{207:function(e,t,o){"use strict";o.r(t);var n,a=o(0),c=o.n(a),r=o(22),l=o.n(r),d=(o(84),o(85),o(86),o(14)),i=(o(87),o(5)),u="CREATE_TODO",s="EDIT_TODO",m="DELETE_TODO",f="CHANGE_TODO_STATUS",p="COMPLETE_ALL",E="CHANGE_CURRENT_FILTER",T="CLEAR_COMPLETED_TODOS",O=o(78),_=Object(i.b)((function(e){return{todos:e.todo.todos}}),{createTodo:function(e){return{type:u,payload:e}},completeAllTodos:function(){return{type:p}}})(c.a.memo((function(e){var t=c.a.useState(""),o=Object(d.a)(t,2),n=o[0],a=o[1];return c.a.createElement("div",{className:"todo-form"},c.a.createElement("button",{className:"todo-form__complete-all",onClick:function(t){e.completeAllTodos()}}),c.a.createElement("form",{className:"todo-form__form",onSubmit:function(t){t.preventDefault(),n.length&&(e.createTodo({id:Object(O.a)(),content:n,completed:!1}),a(""))}},c.a.createElement("input",{className:"todo-form__input",type:"text",placeholder:"What you gonna do?",onChange:function(e){a(e.target.value)},value:n})))}))),b=(o(93),o(94),Object(i.b)(null,{editTodo:function(e){return{type:s,payload:e}},deleteTodo:function(e){return{type:m,payload:e}},changeTodoStatus:function(e){return{type:f,payload:e}}})(c.a.memo((function(e){var t=e.todo.id,o=c.a.useState(!1),n=Object(d.a)(o,2),a=n[0],r=n[1],l=c.a.useState(e.todo.content),i=Object(d.a)(l,2),u=i[0],s=i[1],m=c.a.createRef(),f=function(){e.deleteTodo({id:t})},p=function(){u.length?e.editTodo({id:t,newTodoText:u}):f(),r(!1)};c.a.useLayoutEffect((function(){m.current&&m.current.focus()}),[m]);var E=c.a.createElement("input",{value:u,ref:m,onChange:function(e){return s(e.target.value)},classname:"todo__edit"});return c.a.createElement("div",{className:"todo"},c.a.createElement("i",{className:"todo__checkbox ".concat(e.todo.completed&&"todo__checkbox_active"),onClick:function(){e.changeTodoStatus({id:t})}}),c.a.createElement("div",{className:"todo__text",onDoubleClick:function(){r(!0)},onBlur:p,onKeyPress:function(e){"Enter"===e.key&&p()}},a?E:u),c.a.createElement("button",{className:"todo__delete-button",onClick:f}))})))),y=o(2),v={ALL:"ALL",ACTIVE:"ACTIVE",COMPLETED:"COMPLETED"},j=(n={},Object(y.a)(n,v.ALL,(function(e){return e})),Object(y.a)(n,v.ACTIVE,(function(e){return!e.completed})),Object(y.a)(n,v.COMPLETED,(function(e){return e.completed})),n);Object.filter=function(e,t){return Object.keys(e).reduce((function(o,n){return t(e[n])&&(o[n]=e[n]),o}),{})};var C,N=Object(i.b)((function(e){return{todos:e.todo.todos,filterType:e.todo.filterType}}),null)(c.a.memo((function(e){var t=c.a.useMemo((function(){return t=e.todos,o=e.filterType,Object.filter(t,j[o]);var t,o}),[e.todos,e.filterType]),o=c.a.useMemo((function(){return Object.values(t).map((function(e){return c.a.createElement(b,{todo:e,key:e.id})}))}),[t]);return c.a.createElement("div",{className:"todos"},o)}))),h=(o(95),o(74)),g=o.n(h),L=Object(i.b)((function(e){return{todos:e.todo.todos,filterType:e.todo.filterType}}),{changeCurrentFilter:function(e){return{type:E,payload:e}},clearCompletedTodos:function(){return{type:T}}})(c.a.memo((function(e){var t=e.todos,o=c.a.useMemo((function(){return Object.values(t).filter((function(e){return!e.completed})).length}),[t]),n=function(t){e.changeCurrentFilter({filterType:t.target.name})},a=Object.values(v).map((function(t){return c.a.createElement("button",{name:t,onClick:n,className:"filters__".concat(t.toLowerCase()," filters__").concat(t.toLowerCase()).concat(e.filterType===t?"_active":"")},g()(t))}));return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"footer__count"},"Todos left: ",o),c.a.createElement("div",{className:"filters"},a),c.a.createElement("button",{className:"footer__clear",onClick:e.clearCompletedTodos},"Clear completed"))}))),k=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"main-content"},c.a.createElement("div",{className:"todo-block"},c.a.createElement("div",{className:"todo-block__title"},"Todos"),c.a.createElement("div",{className:"todo-block__content"},c.a.createElement(_,null),c.a.createElement(N,null),c.a.createElement(L,null)))))},S=o(1),D=o(77),w=o(75),A=o.n(w),I=o(76),M=o.n(I),R={todos:JSON.parse(localStorage.getItem("storedTodos"))||{},filterType:v.ALL},x=Object(D.a)(R,(C={},Object(y.a)(C,u,(function(e,t){var o={content:t.payload.content,completed:t.payload.completed,id:t.payload.id};e.todos[t.payload.id]=o})),Object(y.a)(C,s,(function(e,t){var o=t.payload.newTodoText;e.todos[t.payload.id].content=o})),Object(y.a)(C,m,(function(e,t){e.todos=A()(e.todos,t.payload.id)})),Object(y.a)(C,f,(function(e,t){var o=e.todos[t.payload.id].completed;e.todos[t.payload.id].completed=!o})),Object(y.a)(C,p,(function(e,t){Object.values(e.todos).some((function(e){return!e.completed}))?Object.keys(e.todos).forEach((function(t){t.completed||(e.todos[t].completed=!0)})):Object.keys(e.todos).forEach((function(t){e.todos[t].completed=!e.todos[t].completed}))})),Object(y.a)(C,E,(function(e,t){e.filterType=t.payload.filterType})),Object(y.a)(C,T,(function(e,t){e.todos=M()(e.todos,(function(e){return e.completed}))})),C)),P=Object(S.c)({todo:x}),V=Object(S.e)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());V.subscribe((function(){localStorage.setItem("storedTodos",JSON.stringify(V.getState().todo.todos))}));var F=V;var J=function(){return c.a.createElement(i.a,{store:F},c.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,o){e.exports=o(207)},84:function(e,t,o){},85:function(e,t,o){},86:function(e,t,o){},87:function(e,t,o){},93:function(e,t,o){},94:function(e,t,o){},95:function(e,t,o){}},[[79,1,2]]]);
//# sourceMappingURL=main.8fd80cdf.chunk.js.map